(()=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e={getListenFctName:function(){return[]},addListenner:function(){var t=this,e=this.getListenFctName();e.length>0&&e.forEach((function(e){t[e]()}))},listen:function(n){n&&"object"===t(n)&&n.forEach((function(t){e.addListenner.call(t)}))}};function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,n){var r,o;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o="img/photos/Profils/",(r="profilImgPath")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this.constructor===t)throw"This object can't be instancied !";this.jdo=e,this.media=n}var e,o;return e=t,(o=[{key:"getBook",value:function(){return this.media}},{key:"getComeFrom",value:function(){return this.jdo.city+", "+this.jdo.country}},{key:"getId",value:function(){return this.jdo.id}},{key:"getLiTags",value:function(t){"object"===n(t)&&this.getTags().forEach((function(e){var n=document.createElement("li");n.classList.add("inline-block","first-color-text","tags");var r=document.createElement("span");r.textContent=e,r.ariaLabel="Tag",n.append(r),t.append(n)}))}},{key:"getName",value:function(){return this.jdo.name}},{key:"getPortrait",value:function(){return this.jdo.portrait}},{key:"getPrice",value:function(){return this.jdo.price+"€ / jour"}},{key:"getTagline",value:function(){return this.jdo.tagline}},{key:"getTags",value:function(){return this.jdo.tags}},{key:"setProfilImgSrc",value:function(t){t.setAttribute("src",this.profilImgPath+this.getPortrait()),t.setAttribute("atl",this.getName()+"'s photo profil"),t.setAttribute("role","presentation")}}])&&r(e.prototype,o),t}();function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(y,t);var e,n,r,o,i,m=(o=y,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=f(o);if(i){var n=f(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function y(){var t;a(this,y);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(s(t=m.call.apply(m,[this].concat(n))),"profilContainer",document.getElementById("photographers-list")),t}return e=y,r=[{key:"ajustHeightImg",value:function(){var t=document.querySelectorAll(".profil img"),e=window.innerWidth,n=e>1023?.9*e*.15:e/1.79;t.forEach((function(t){t.style.height=parseInt(n)+"px"}))}},{key:"initHTMLContainer",value:function(){this.htmlContainer.innerHTML=""}}],(n=[{key:"getProfilPageLink",value:function(){return"photographer_page.html?id="+this.getId()}},{key:"show",value:function(){var t=document.createElement("a");t.classList.add("profil","flex"),t.setAttribute("href",this.getProfilPageLink()),t.ariaLabel=this.getName()+"'s profil link";var e=document.createElement("img");this.setProfilImgSrc(e),t.append(e);var n=document.createElement("h2");n.classList.add("name-photographer"),n.ariaLabel="Name",n.textContent=this.getName(),t.append(n);var r=document.createElement("p");r.textContent=this.getComeFrom(),r.ariaLabel="Location",t.append(r);var o=document.createElement("p");o.textContent=this.getTagline(),t.append(o);var i=document.createElement("p");i.textContent=this.getPrice(),i.ariaLabel="hour price",t.append(i);var a=document.createElement("ul");a.classList.add("flex"),this.getLiTags(a),t.append(a),this.profilContainer.append(t)}}])&&c(e.prototype,n),r&&c(e,r),y}(o);d(m,"htmlContainer",document.getElementById("photographers-list"));var y="Fisheye"!=document.title?document.getElementById("current-element-type"):"",h="Fisheye"!=document.title?document.getElementById("gallery"):"",p=document.querySelectorAll("a.media"),v="Fisheye"!=document.title?document.getElementById("like-total"):"",g="Fisheye"!=document.title?document.getElementById("contact-form-modal").classList:"",b="Fisheye"!=document.title?document.getElementById("order-by-container").classList:"",k="Fisheye"!=document.title?document.getElementById("photo-sum"):"",E="Fisheye"!=document.title?document.getElementById("video-sum"):"";function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function P(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(r);if(o){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return P(this,t)});function a(){var t;I(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return S(_(t=i.call.apply(i,[this].concat(n))),"media_path","img/photos/"),t}return e=a,(n=[{key:"addMediaInGallery",value:function(t,e,n,r,o){var i=document.getElementById(e+"-container-"+n);return i.classList.replace("hidden","photo-container"),i.setAttribute("aria-label",t.title+", closeup view"),i.append(this.getMediaPattern(t,e,n,r,o)),i.append(this.getMediaTitlePattern(t,e,n)),i.append(this.getMediaLikePattern(t,e,n)),i.append(this.getPPattern("date",e,n,t.date)),i}},{key:"addPortraitImg",value:function(){var t=document.createElement("img");this.setProfilImgSrc(t),document.getElementById("photographer-informations").append(t)}},{key:"getMediaLikePattern",value:function(t,e,n){var r=document.createElement("a");return r.setAttribute("id",e+"-like-"+n),r.setAttribute("href",""),r.classList.add("like"),r.setAttribute("role","text"),r.setAttribute("aria-label","likes"),r.textContent=t.likes,r}},{key:"getMediaPattern",value:function(t,e,n,r,o){var i="photo"===e?document.createElement("img"):document.createElement("video");return i.setAttribute("id",e+"-"+n),i.setAttribute("src",this.media_path+r+"/"+o),i.setAttribute("alt",t["alt-text"]),i.setAttribute("aria-label",t.title),i}},{key:"getMediaTitlePattern",value:function(t,e,n){var r=document.createElement("h2");return r.setAttribute("id",e+"-title-"+n),r.textContent=t["alt-text"],r}},{key:"getPPattern",value:function(t,e,n,r){var o=document.createElement("p");return o.setAttribute("id",e+"-"+t+"-"+n),o.classList.add("like"===t?"like":"hidden"),o.textContent=r,o}},{key:"show",value:function(){var t=this;["Name","ComeFrom","Tagline","Tags","Portrait","Price","name-title-contact","Book"].forEach((function(e){switch(e){case"Book":t.showBook(t.getBook(),t.getName());break;case"name-title-contact":document.getElementById(e).textContent=t.getName();break;case"Portrait":t.addPortraitImg();break;case"Tags":t.getLiTags(document.getElementById("Tags"));break;default:document.getElementById(e).textContent=t["get"+e]()}}))}},{key:"showBook",value:function(t,e){if(Array.isArray(t)){var n,r=0,o="",i=0,a=0,c=0,l=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(t);try{for(l.s();!(n=l.n()).done;){var u=n.value;if("object"===A(u)){var s=u.image?u.image:u.video,f=s.split(".");"jpg"===f[1]?(r=i,o="photo",i++):"mp4"===f[1]&&(r=a,o="video",a++),this.addMediaInGallery(u,o,r,e,s),c+=u.likes}}}catch(t){l.e(t)}finally{l.f()}v.textContent=c,k.value=i,E.value=a}}}])&&C(e.prototype,n),a}(o);function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M,F,N,D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getPhotographerMedia",value:function(t,e){if(Array.isArray(t)){var n,r=[],o=x(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;parseInt(i.photographerId)===parseInt(e)&&r.push(i)}}catch(t){o.e(t)}finally{o.f()}return r}}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fetch(this.jsonDataFile).then((function(t){if(t.ok)return t.json()})).then((function(r){if(Array.isArray(r.photographers)){var o,i=x(r.photographers);try{for(i.s();!(o=i.n()).done;){var a=o.value,c=t.getPhotographerMedia(r.media,a.id);!e||"tags"===e&&a[e].includes(n)?new m(a,c).show():"id"===e&&parseInt(a.id)===parseInt(n)&&new B(a,c).show()}}catch(t){i.e(t)}finally{i.f()}"id"!=e&&m.ajustHeightImg()}})).catch((function(t){console.log(t)}))}}],null&&T(e.prototype,null),n&&T(e,n),t}();function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}N="https://alxbdo.github.io/BidaudAlexandre_6_13072021/data/fishEyeData.json",(F="jsonDataFile")in(M=D)?Object.defineProperty(M,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):M[F]=N;var H={elements_date:[],elements_like:[],elements_title:[],order_by_select:document.getElementById("order-by"),addElementsArray:function(t,e){var n=document.getElementById(e[0]+"-"+t+"-"+e[2]);n&&this["elements_"+t].push({id:e[0]+"-"+e[1]+"-"+e[2],value:"date"!=t?n.textContent:this.getDateNumberFormat(n.textContent)})},addLikeOnClick:function(){setTimeout((function(){document.querySelectorAll(".like").forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.classList.contains("liked")||H.addLikeWork(t)}))}))}),100)},addLikeWork:function(t){"object"===G(t)&&(t.textContent=parseInt(t.textContent)+1,v.textContent=parseInt(v.textContent)+1,t.classList.add("liked"))},createElementArray:function(t){var e=this;p.forEach((function(n){e.addElementsArray(t,e.getDomElementIdArray(n))}))},displayBookSorted:function(t){var e,n=1,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.getElementsArray(t));try{for(r.s();!(e=r.n()).done;){var o=e.value;o.id&&""!=o.id&&function(){var t=document.getElementById(o.id),e=75*n+100;t.style.order=n,t.classList.add("invisible"),setTimeout((function(){t.classList.remove("invisible")}),e),n++}()}}catch(t){r.e(t)}finally{r.f()}},getDateNumberFormat:function(t){var e=t.split("-");return e[2]+e[1]+e[0]},getDomElementIdArray:function(t){return t.getAttribute("id").split("-")},getElementsArray:function(t){return 0===this["elements_"+t].length&&(this.createElementArray(t),this.sortBook(t)),this["elements_"+t]},getListenFctName:function(){return["addLikeOnClick","orderByClick","selectOptionsClick"]},orderByClick:function(){this.order_by_select.addEventListener("click",(function(t){t.preventDefault(),this.classList.contains("open")?(this.classList.remove("open"),this.setAttribute("aria-expanded",!1)):(this.classList.add("open"),this.setAttribute("aria-expanded",!0))}))},selectOptionsClick:function(){document.querySelectorAll("#order-by a").forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault(),b.remove("date-slct","title-slct");var n=t.getAttribute("id");document.getElementById("order-by-select").selectedIndex="date"===n?1:"like"===n?0:2,b.add(n+"-slct"),H.displayBookSorted(n)}))}))},sortBook:function(t){this["elements_"+t].sort(this.sortBookElement)},sortBookElement:function(t,e){return t.value>e.value?1:t.value<e.value?-1:0}};function U(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V={close_modal_btn:document.getElementById("close-modal-form"),form_dom_obj:document.getElementById("contact"),inputs_value:new Map,open_form_link:document.getElementById("contact-form-link"),check:function(){var t,e=U(this.form_dom_obj.elements);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(!this.checkInput(n))return!1;this.inputs_value.set(n.id,n.value)}}catch(t){e.e(t)}finally{e.f()}return!0},checkInput:function(t){if(""!=t.id){var e=t.id.includes("name")?"Name":t.id.charAt(0).toUpperCase()+t.id.substring(1);if(!this["check"+e.charAt(0).toUpperCase()+e.substring(1)](t.value))return this.errorInput(t);this.validInput(t)}return!0},checkEmail:function(t){return!!/([\w-.]+@[\w.]+\.{1}[\w]+)/.test(t)},checkMessage:function(t){return t.length>14&&t.length<301},checkName:function(t){return!(t.length<2||/[@:./\\_{}[\]()|%*$£?!&~#`µ0-9]/.test(t))},clear:function(){var t,e=U(this.form_dom_obj.elements);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(""!=n.id){n.value="";var r=document.getElementById(n.id+"-info").classList;r.contains("err")&&r.remove("err"),r.contains("valid")&&r.remove("valid")}}}catch(t){e.e(t)}finally{e.f()}setTimeout((function(){g.remove("submitted"),g.replace("opened","closed")}),3e3)},close:function(){g.replace("opened","closed"),document.getElementById("fishEye-HomePage").focus()},closeClick:function(){var t=this;this.close_modal_btn.addEventListener("click",(function(e){e.preventDefault(),t.close()}))},errorInput:function(t){var e=document.getElementById(t.id+"-info").classList;return e.contains("valid")&&e.remove("valid"),e.add("err"),t.focus(),!1},getListenFctName:function(){return["submit","closeClick","open","onChangeInput"]},onChangeInput:function(){var t,e=this,n=U(this.form_dom_obj.elements);try{var r=function(){var n=t.value;n.addEventListener("change",(function(t){e.checkInput(n)}))};for(n.s();!(t=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}},open:function(){var t=this;this.open_form_link.addEventListener("click",(function(e){e.preventDefault(),g.replace("closed","opened"),t.close_modal_btn.focus()}))},send:function(){if(this.check()){document.getElementById("recipient-name").textContent=document.getElementById("name-title-contact").textContent,g.add("submitted"),console.log("Valeurs des inputs : ");var t,e=U(this.inputs_value);try{for(e.s();!(t=e.n()).done;){var n=t.value;console.log(n)}}catch(t){e.e(t)}finally{e.f()}this.clear(),document.getElementById("fishEye-HomePage").focus()}},submit:function(){var t=this;this.form_dom_obj.addEventListener("submit",(function(e){e.preventDefault(),t.send()}))},validInput:function(t){var e=document.getElementById(t.id+"-info").classList;e.contains("err")&&e.remove("err"),e.add("valid")}},$={close_lightbox_btn:document.getElementById("close-lightbox"),galleryClassList:h.classList,lightboxPosition:document.getElementById("lightbox-position"),getCurrentPosition:function(){return parseInt(this.lightboxPosition.value)},getGalleryMode:function(){return this.galleryClassList.contains("gallery")?"gallery":"lightbox"},getListenFctName:function(){return["closeClick","openClick","moveClick"]},getNewIdHTML:function(t){var e=y.value;return(t>=("photo"===e?k.value:E.value)||t<0)&&(t=t<0&&"video"===e?k.value-1:0,"photo"===e&&E.value>0?e="video":"video"===e&&k.value>0&&(e="photo")),[e,t]},setCurrentPosition:function(t){this.lightboxPosition.value=t},setCurrentType:function(t){y.value=t},activeElement:function(t){this.addActivClass(t),this.setCurrentPosition(H.getDomElementIdArray(t)[2])},addActivClass:function(t){t.classList.add("activ")},changeBookView:function(){var t=this.getGalleryMode(),e="gallery"===t?"lightbox":"gallery";"lightbox"!=e?(h.setAttribute("role","none"),h.setAttribute("aria-label",""),this.clearActivClass()):(h.setAttribute("role","dialog"),h.setAttribute("aria-label","image closeup view")),this.changeGalleryClass(e,t)},changeGalleryClass:function(t,e){this.galleryClassList.remove(e),this.galleryClassList.add(t)},clearActivClass:function(){document.querySelector(".activ").classList.remove("activ")},closeClick:function(){this.close_lightbox_btn.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),$.changeBookView()}))},openClick:function(){p.forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault(),"gallery"===$.getGalleryMode()&&($.changeBookView(),$.activeElement(t))}))}))},move:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";this.clearActivClass();var e="next"===t?this.getCurrentPosition()+1:this.getCurrentPosition()-1,n=this.getNewIdHTML(e);this.setCurrentType(n[0]),this.activeElement(document.getElementById(n[0]+"-container-"+n[1]))},moveClick:function(){document.querySelectorAll(".move").forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),$.move(t.getAttribute("id"))}))}))}},W={keys_searched:["ArrowLeft","ArrowRight","Escape"],getListenFctName:function(){return["listenKeyboard"]},listenKeyboard:function(){var t=this;document.addEventListener("keydown",(function(e){t.keys_searched.forEach((function(n){e.key===n&&t[n+"Action"]()}))}),!1)},ArrowLeftAction:function(){$.move("previous")},ArrowRightAction:function(){$.move("next")},EscapeAction:function(){"lightbox"===$.getGalleryMode()?$.changeBookView():V.close()}},K=window.location.href;if(K.split("?")[1]){var z=new URLSearchParams(K.split("?")[1]);z.has("id")&&(D.search("id",z.get("id")),e.listen([H,V,W,$]))}})();