(()=>{"use strict";class t{profilImgPath(){return"img/photos/Profils/"}constructor(e,i){if(this.constructor===t)throw"This object can't be instancied !";this.jdo=e,this.media=i}getBook(){return this.media}getComeFrom(){return this.jdo.city+", "+this.jdo.country}getId(){return this.jdo.id}getLiTags(t){"object"==typeof t&&this.getTags().forEach((e=>{let i=document.createElement("li");i.classList.add("inline-block","first-color-text","tags");let a=document.createElement("span");a.textContent=e,a.ariaLabel="Tag",i.append(a),t.append(i)}))}getName(){return this.jdo.name}getPortrait(){return this.jdo.portrait}getPrice(){return this.jdo.price+"â‚¬ / jour"}getTagline(){return this.jdo.tagline}getTags(){return this.jdo.tags}setProfilImgSrc(t){t.setAttribute("src",this.profilImgPath()+this.getPortrait()),t.setAttribute("atl",this.getName()+"'s photo profil"),t.setAttribute("role","presentation")}}class e extends t{static htmlContainer(){return document.getElementById("photographers-list")}profilContainer(){return document.getElementById("photographers-list")}static ajustHeightImg(){let t=document.querySelectorAll(".profil img"),e=window.innerWidth,i=e>1023?.9*e*.15:e/1.79;t.forEach((t=>{t.style.height=parseInt(i)+"px"}))}getProfilPageLink(){return"photographer_page.html?id="+this.getId()}static initHTMLContainer(){this.htmlContainer().innerHTML=""}show(){let t=document.createElement("a");t.classList.add("profil","flex"),t.setAttribute("href",this.getProfilPageLink()),t.ariaLabel=this.getName()+"'s profil link";let e=document.createElement("img");this.setProfilImgSrc(e),t.append(e);let i=document.createElement("h2");i.classList.add("name-photographer"),i.ariaLabel="Name",i.textContent=this.getName(),t.append(i);let a=document.createElement("p");a.textContent=this.getComeFrom(),a.ariaLabel="Location",t.append(a);let n=document.createElement("p");n.textContent=this.getTagline(),t.append(n);let r=document.createElement("p");r.textContent=this.getPrice(),r.ariaLabel="hour price",t.append(r);let o=document.createElement("ul");o.classList.add("flex"),this.getLiTags(o),t.append(o),this.profilContainer().append(t)}}"Fisheye"!==document.title&&document.getElementById("current-element-type"),"Fisheye"!==document.title&&document.getElementById("gallery"),document.querySelectorAll("a.media");const i="Fisheye"!==document.title?document.getElementById("like-total"):"",a=("Fisheye"!==document.title&&document.getElementById("contact-form-modal").classList,"Fisheye"!==document.title&&document.getElementById("order-by-container").classList,"Fisheye"!==document.title?document.getElementById("photo-sum"):""),n="Fisheye"!==document.title?document.getElementById("video-sum"):"";class r extends t{media_path(){return"img/photos/"}addMediaInGallery(t,e,i,a,n){let r=document.getElementById(e+"-container-"+i);return r.classList.replace("hidden","photo-container"),r.setAttribute("aria-label",t.title+", closeup view"),r.append(this.getMediaPattern(t,e,i,a,n)),r.append(this.getMediaTitlePattern(t,e,i)),r.append(this.getMediaLikePattern(t,e,i)),r.append(this.getPPattern("date",e,i,t.date)),r}addPortraitImg(){let t=document.createElement("img");this.setProfilImgSrc(t),document.getElementById("photographer-informations").append(t)}getMediaLikePattern(t,e,i){let a=document.createElement("a");return a.setAttribute("id",e+"-like-"+i),a.setAttribute("href",""),a.classList.add("like"),a.setAttribute("role","text"),a.setAttribute("aria-label","likes"),a.textContent=t.likes,a}getMediaPattern(t,e,i,a,n){let r="photo"===e?document.createElement("img"):document.createElement("video");return r.setAttribute("id",e+"-"+i),r.setAttribute("src",this.media_path()+a+"/"+n),r.setAttribute("alt",t["alt-text"]),r.setAttribute("aria-label",t.title),r}getMediaTitlePattern(t,e,i){let a=document.createElement("h2");return a.setAttribute("id",e+"-title-"+i),a.textContent=t["alt-text"],a}getPPattern(t,e,i,a){let n=document.createElement("p");return n.setAttribute("id",e+"-"+t+"-"+i),n.classList.add("like"===t?"like":"hidden"),n.textContent=a,n}show(){["Name","ComeFrom","Tagline","Tags","Portrait","Price","name-title-contact","Book"].forEach((t=>{switch(t){case"Book":this.showBook(this.getBook(),this.getName());break;case"name-title-contact":document.getElementById(t).textContent=this.getName();break;case"Portrait":this.addPortraitImg();break;case"Tags":this.getLiTags(document.getElementById("Tags"));break;default:document.getElementById(t).textContent=this["get"+t]()}}))}showBook(t,e){if(Array.isArray(t)){let r=0,o="",s=0,l=0,d=0;for(let i of t)if("object"==typeof i){let t=i.image?i.image:i.video,a=t.split(".");"jpg"===a[1]?(r=s,o="photo",s++):"mp4"===a[1]&&(r=l,o="video",l++),this.addMediaInGallery(i,o,r,e,t),d+=i.likes}i.textContent=d,a.value=s,n.value=l}}}class o{static jsonDataFile(){return"https://alxbdo.github.io/BidaudAlexandre_6_13072021/data/fishEyeData.json"}static getPhotographerMedia(t,e){if(Array.isArray(t)){let i=[];for(let a of t)parseInt(a.photographerId)===parseInt(e)&&i.push(a);return i}}static search(t=!1,i=!1){fetch(this.jsonDataFile()).then((function(t){if(t.ok)return t.json()})).then((function(a){if(Array.isArray(a.photographers)){for(let n of a.photographers){let s=o.getPhotographerMedia(a.media,n.id);!t||"tags"===t&&n[t].includes(i)?new e(n,s).show():"id"===t&&parseInt(n.id)===parseInt(i)&&new r(n,s).show()}"id"!==t&&e.ajustHeightImg()}})).catch((function(t){console.log(t)}))}}document.querySelectorAll(".tags").forEach((t=>{t.addEventListener("click",(function(i){i.preventDefault(),e.initHTMLContainer(),o.search("tags",t.firstElementChild.textContent.toLocaleLowerCase())}))})),window.addEventListener("scroll",(function(){window.scrollY>0?document.getElementById("pass-cont").classList.remove("hidden"):document.getElementById("pass-cont").classList.add("hidden")})),o.search()})();